var NewTabEDK,newtab=newtab||{};newtab.General=function(){},newtab.General.prototype={init:function(){NewTabEDK.init(),NewTabEDK.translations(),NewTabEDK.PopupListener(),NewTabEDK.analytics(),NewTabEDK.tuto()}},$(document).ready(function(){(new newtab.General).init()}),NewTabEDK={init:function(){chrome.storage.sync.get(["dk"],function(e){NewTabEDK.toggleDK("disabled"===e.dk)}),setTimeout(function(){$("body").addClass("transitions")},333)},translations:function(){for(var e=$("[data-i18n]"),t=0;t<e.length;++t){var n=e[t],a=n.getAttribute("data-i18n");n.innerHTML=NewTabEDK.getTranslation(a)}},getTranslation:function(e,t){return chrome.i18n.getMessage(e)},toggleDK:function(e){!0===e?$("body").addClass("EDK__body"):!1===e?$("body").removeClass("EDK__body"):$("body").toggleClass("EDK__body")},PopupListener:function(){chrome.extension.onRequest.addListener(function(e,t,n){switch(e.action){case"switch":NewTabEDK.toggleDK(),n({done:"switch"});break;case"redirect":chrome.storage.sync.get(["url"],function(e){e=e.url;chrome.storage.sync.set({url:""}),window.location.href=e,n({done:"redirect to"+e})});break;case"testConnection":n({done:"ConnectionSuccess"});break;default:n({done:"no action"})}})},analytics:function(){NewTabEDK.service=analytics.getService("ecosia_extension"),NewTabEDK.service.getConfig().addCallback(function(t){chrome.storage.sync.get(["rgpd_consent"],function(e){e=e.rgpd_consent;t.setTrackingPermitted(!0===e)})}),NewTabEDK.tracker=NewTabEDK.service.getTracker("UA-160182955-1"),NewTabEDK.tracker.sendAppView("NewTabView"),NewTabEDK.tracker.sendEvent("New tab","Open","L'utilisateur a ouvert un nouvel onglet"),$(".donate__link").on("click",function(){NewTabEDK.tracker.sendEvent("New tab","Donate","L'utilisateur a cliquÃ© sur le bouton de donation")})},tuto:function(){var e=localStorage.getItem("tutoPlayed");$(".newtab-page__tuto-close").on("click",function(){localStorage.setItem("tutoPlayed",!0),$(".newtab-page__tuto").addClass("hidden")}),e||$(".newtab-page__tuto").removeClass("hidden")}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld3RhYi5qcyJdLCJuYW1lcyI6WyJOZXdUYWJFREsiLCJuZXd0YWIiLCJHZW5lcmFsIiwicHJvdG90eXBlIiwiaW5pdCIsInRyYW5zbGF0aW9ucyIsIlBvcHVwTGlzdGVuZXIiLCJhbmFseXRpY3MiLCJ0dXRvIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJjaHJvbWUiLCJzdG9yYWdlIiwic3luYyIsImdldCIsIml0ZW0iLCJ0b2dnbGVESyIsImRrIiwic2V0VGltZW91dCIsImFkZENsYXNzIiwidHJhbnNsYXRlX2VsbXRzIiwiaSIsImxlbmd0aCIsImtleSIsImdldEF0dHJpYnV0ZSIsImlubmVySFRNTCIsImdldFRyYW5zbGF0aW9uIiwicGFyYW1zIiwiaTE4biIsImdldE1lc3NhZ2UiLCJzdGF0ZSIsInJlbW92ZUNsYXNzIiwidG9nZ2xlQ2xhc3MiLCJleHRlbnNpb24iLCJvblJlcXVlc3QiLCJhZGRMaXN0ZW5lciIsInJlcXVlc3QiLCJzZW5kZXIiLCJzZW5kUmVzcG9uc2UiLCJhY3Rpb24iLCJkb25lIiwicmVzdWx0IiwidXJsIiwic2V0Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwic2VydmljZSIsImdldFNlcnZpY2UiLCJnZXRDb25maWciLCJhZGRDYWxsYmFjayIsImNvbmZpZyIsInBlcm1pdHRlZCIsInJncGRfY29uc2VudCIsInNldFRyYWNraW5nUGVybWl0dGVkIiwidHJhY2tlciIsImdldFRyYWNrZXIiLCJzZW5kQXBwVmlldyIsInNlbmRFdmVudCIsIm9uIiwidHV0b1BsYXllZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRJdGVtIl0sIm1hcHBpbmdzIjoiQUFDQSxJQXFCQUEsVUFyQkFDLE9BQUFBLFFBQUEsR0FFQUEsT0FBQUMsUUFBQSxhQUdBRCxPQUFBQyxRQUFBQyxVQUFBLENBQ0FDLEtBQUEsV0FDQUosVUFBQUksT0FDQUosVUFBQUssZUFDQUwsVUFBQU0sZ0JBQ0FOLFVBQUFPLFlBQ0FQLFVBQUFRLFNBSUFDLEVBQUFDLFVBQUFDLE1BQUEsWUFDQSxJQUFBVixPQUFBQyxTQUNBRSxTQUtBSixVQUFBLENBQ0FJLEtBQUEsV0FDQVEsT0FBQUMsUUFBQUMsS0FBQUMsSUFBQSxDQUFBLE1BQUEsU0FBQUMsR0FDQWhCLFVBQUFpQixTQUFBLGFBQUFELEVBQUFFLE1BR0FDLFdBQUEsV0FDQVYsRUFBQSxRQUFBVyxTQUFBLGdCQUNBLE1BRUFmLGFBQUEsV0FFQSxJQURBLElBQUFnQixFQUFBWixFQUFBLGVBQ0FhLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsU0FBQUQsRUFBQSxDQUNBLElBQUFOLEVBQUFLLEVBQUFDLEdBQ0FFLEVBQUFSLEVBQUFTLGFBQUEsYUFDQVQsRUFBQVUsVUFBQTFCLFVBQUEyQixlQUFBSCxLQUdBRyxlQUFBLFNBQUFILEVBQUFJLEdBQ0EsT0FBQWhCLE9BQUFpQixLQUFBQyxXQUFBTixJQUVBUCxTQUFBLFNBQUFjLElBQ0EsSUFBQUEsRUFDQXRCLEVBQUEsUUFBQVcsU0FBQSxjQUNBLElBQUFXLEVBQ0F0QixFQUFBLFFBQUF1QixZQUFBLGFBRUF2QixFQUFBLFFBQUF3QixZQUFBLGNBR0EzQixjQUFBLFdBQ0FNLE9BQUFzQixVQUFBQyxVQUFBQyxZQUNBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsT0FBQUYsRUFBQUcsUUFDQSxJQUFBLFNBQ0F4QyxVQUFBaUIsV0FDQXNCLEVBQUEsQ0FBQUUsS0FBQSxXQUNBLE1BRUEsSUFBQSxXQUNBN0IsT0FBQUMsUUFBQUMsS0FBQUMsSUFBQSxDQUFBLE9BQUEsU0FBQTJCLEdBQ0FDLEVBQUFELEVBQUFDLElBQ0EvQixPQUFBQyxRQUFBQyxLQUFBOEIsSUFBQSxDQUFBRCxJQUFBLEtBRUFFLE9BQUFDLFNBQUFDLEtBQUFKLEVBQ0FKLEVBQUEsQ0FBQUUsS0FBQSxjQUFBRSxNQUVBLE1BRUEsSUFBQSxpQkFDQUosRUFBQSxDQUFBRSxLQUFBLHNCQUNBLE1BRUEsUUFDQUYsRUFBQSxDQUFBRSxLQUFBLGtCQUtBbEMsVUFBQSxXQUNBUCxVQUFBZ0QsUUFBQXpDLFVBQUEwQyxXQUFBLG9CQUVBakQsVUFBQWdELFFBQUFFLFlBQUFDLFlBQ0EsU0FBQUMsR0FDQXhDLE9BQUFDLFFBQUFDLEtBQUFDLElBQUEsQ0FBQSxnQkFBQSxTQUFBMkIsR0FDQVcsRUFBQVgsRUFBQVksYUFDQUYsRUFBQUcsc0JBQUEsSUFBQUYsT0FJQXJELFVBQUF3RCxRQUFBeEQsVUFBQWdELFFBQUFTLFdBQUEsa0JBRUF6RCxVQUFBd0QsUUFBQUUsWUFBQSxjQUVBMUQsVUFBQXdELFFBQUFHLFVBQUEsVUFBQSxPQUFBLDJDQUVBbEQsRUFBQSxpQkFBQW1ELEdBQUEsUUFBQSxXQUNBNUQsVUFBQXdELFFBQUFHLFVBQUEsVUFBQSxTQUFBLHVEQUdBbkQsS0FBQSxXQUNBLElBQUFxRCxFQUFBQyxhQUFBQyxRQUFBLGNBRUF0RCxFQUFBLDRCQUFBbUQsR0FBQSxRQUFBLFdBQ0FFLGFBQUFFLFFBQUEsY0FBQSxHQUNBdkQsRUFBQSxzQkFBQVcsU0FBQSxZQUdBeUMsR0FDQXBELEVBQUEsc0JBQUF1QixZQUFBIiwiZmlsZSI6Im5ld3RhYi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIERlY2xhcmUgbmFtZXNwYWNlXG52YXIgbmV3dGFiID0gbmV3dGFiIHx8IHt9O1xuXG5uZXd0YWIuR2VuZXJhbCA9IGZ1bmN0aW9uICgpIHtcbn07XG5cbm5ld3RhYi5HZW5lcmFsLnByb3RvdHlwZSA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIE5ld1RhYkVESy5pbml0KCk7XG4gICAgICAgIE5ld1RhYkVESy50cmFuc2xhdGlvbnMoKTtcbiAgICAgICAgTmV3VGFiRURLLlBvcHVwTGlzdGVuZXIoKTtcbiAgICAgICAgTmV3VGFiRURLLmFuYWx5dGljcygpO1xuICAgICAgICBOZXdUYWJFREsudHV0bygpO1xuICAgIH1cbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZyA9IG5ldyBuZXd0YWIuR2VuZXJhbCgpO1xuICAgIGcuaW5pdCgpO1xufSk7XG5cbi8vU3RhcnRcbnZhciBOZXdUYWJFREs7XG5OZXdUYWJFREsgPSB7XG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ2RrJ10sIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBOZXdUYWJFREsudG9nZ2xlREsoaXRlbS5kayA9PT0gJ2Rpc2FibGVkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCd0cmFuc2l0aW9ucycpO1xuICAgICAgICB9LCAzMzMpO1xuICAgIH0sXG4gICAgdHJhbnNsYXRpb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0cmFuc2xhdGVfZWxtdHMgPSAkKFwiW2RhdGEtaTE4bl1cIik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhbnNsYXRlX2VsbXRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHRyYW5zbGF0ZV9lbG10c1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1pMThuJyk7XG4gICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IE5ld1RhYkVESy5nZXRUcmFuc2xhdGlvbihrZXkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRUcmFuc2xhdGlvbjogZnVuY3Rpb24gKGtleSwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKGtleSk7XG4gICAgfSxcbiAgICB0b2dnbGVESzogZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdFREtfX2JvZHknKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnRURLX19ib2R5Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ0VES19fYm9keScpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBQb3B1cExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNocm9tZS5leHRlbnNpb24ub25SZXF1ZXN0LmFkZExpc3RlbmVyKFxuICAgICAgICAgICAgZnVuY3Rpb24gKHJlcXVlc3QsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZXF1ZXN0LmFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3dpdGNoXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBOZXdUYWJFREsudG9nZ2xlREsoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZSh7ZG9uZTogJ3N3aXRjaCd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWRpcmVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoWyd1cmwnXSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHQudXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHt1cmw6ICcnfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2Uoe2RvbmU6ICdyZWRpcmVjdCB0bycgKyB1cmx9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRlc3RDb25uZWN0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2Uoe2RvbmU6ICdDb25uZWN0aW9uU3VjY2Vzcyd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2Uoe2RvbmU6ICdubyBhY3Rpb24nfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH0sXG4gICAgYW5hbHl0aWNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIE5ld1RhYkVESy5zZXJ2aWNlID0gYW5hbHl0aWNzLmdldFNlcnZpY2UoJ2Vjb3NpYV9leHRlbnNpb24nKTtcblxuICAgICAgICBOZXdUYWJFREsuc2VydmljZS5nZXRDb25maWcoKS5hZGRDYWxsYmFjayhcbiAgICAgICAgICAgIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ3JncGRfY29uc2VudCddLCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZXJtaXR0ZWQgPSByZXN1bHQucmdwZF9jb25zZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25maWcuc2V0VHJhY2tpbmdQZXJtaXR0ZWQocGVybWl0dGVkID09PSB0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIE5ld1RhYkVESy50cmFja2VyID0gTmV3VGFiRURLLnNlcnZpY2UuZ2V0VHJhY2tlcignVUEtMTYwMTgyOTU1LTEnKTsgIC8vIEdBIFRyYWNraW5nIElELlxuXG4gICAgICAgIE5ld1RhYkVESy50cmFja2VyLnNlbmRBcHBWaWV3KCdOZXdUYWJWaWV3Jyk7XG5cbiAgICAgICAgTmV3VGFiRURLLnRyYWNrZXIuc2VuZEV2ZW50KCdOZXcgdGFiJywgJ09wZW4nLCBcIkwndXRpbGlzYXRldXIgYSBvdXZlcnQgdW4gbm91dmVsIG9uZ2xldFwiKTtcblxuICAgICAgICAkKCcuZG9uYXRlX19saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgTmV3VGFiRURLLnRyYWNrZXIuc2VuZEV2ZW50KCdOZXcgdGFiJywgJ0RvbmF0ZScsIFwiTCd1dGlsaXNhdGV1ciBhIGNsaXF1w6kgc3VyIGxlIGJvdXRvbiBkZSBkb25hdGlvblwiKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICB0dXRvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHR1dG9QbGF5ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndHV0b1BsYXllZCcpO1xuXG4gICAgICAgICQoJy5uZXd0YWItcGFnZV9fdHV0by1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0dXRvUGxheWVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAkKCcubmV3dGFiLXBhZ2VfX3R1dG8nKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKCF0dXRvUGxheWVkKSB7XG4gICAgICAgICAgICAkKCcubmV3dGFiLXBhZ2VfX3R1dG8nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIl19
