var PopupEDK,main=main||{};main.General=function(){},main.General.prototype={init:function(){PopupEDK.switch(),PopupEDK.onPopupOpen(),PopupEDK.googleSearch(),PopupEDK.closeAlert(),PopupEDK.showNoDomainAlert(),PopupEDK.translations()}},$(document).ready(function(){(new main.General).init()}),PopupEDK={switch:function(){$(".switch-onoff__slide").on("click",function(e){e.preventDefault(),chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendRequest(e[0].id,{action:"switch"},function(e){e&&("switch"===e.done?PopupEDK.switchBtn():console.log(e))})})})},logStorage:function(){chrome.storage.sync.get(["dk"],function(e){console.log(e.dk)})},switchBtn:function(){var n=$(".switch-onoff__slide");chrome.storage.sync.get(["dk"],function(e){"disabled"===e.dk?(chrome.storage.sync.set({dk:"enabled"}),n.removeClass("open")):(chrome.storage.sync.set({dk:"disabled"}),n.addClass("open"))}),PopupEDK.logStorage()},onPopupOpen:function(){var n=$(".switch-onoff__slide");void 0!==chrome.storage&&chrome.storage.sync.get(["dk"],function(e){"disabled"===e.dk?n.addClass("open"):("undefined"===e.dk&&chrome.storage.sync.set({dk:"disabled"}),n.removeClass("open"))})},googleSearch:function(){$("#google-search").on("submit",function(){var e=$(this).attr("action");$input=$(this).find(".search__input");var n=e+"?"+$input.attr("name")+"="+$input.val();chrome.storage.sync.set({url:n}),chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendRequest(e[0].id,{action:"redirect"},function(e){e&&("redirect"===e.done?console.log("Redirected"):console.log(e))})})})},closeAlert:function(){var e=$(".alert"),n=[];void 0!==chrome.storage&&chrome.storage.sync.get(["alerts"],function(e){void 0!==e.alerts&&(n=e.alerts),void 0!==n&&$.each(n,function(e,n){$("#"+n).addClass("d-none")})}),setTimeout(function(){e.length!==n.length&&$(".warning__container").removeClass("d-none")},250),e.on("closed.bs.alert",function(){void 0!==chrome.storage&&(n.push(this.id),chrome.storage.sync.set({alerts:n}))})},showNoDomainAlert:function(){new Promise(function(n,o){chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendRequest(e[0].id,{action:"testConnection"},function(e){e?"ConnectionSuccess"===e.done?n("ConnectionSuccess"):o(e):o("ConnectionFailed")})})}).then(function(e){console.log(e)}).catch(function(e){console.log(e),$(".popup__disabled, .popup__container").toggleClass("d-none")})},translations:function(){for(var e=$("[data-i18n]"),n=0;n<e.length;++n){var o=e[n],t=o.getAttribute("data-i18n"),c=o.getAttribute("data-i18n-target");switch(console.log(c),c){case"placeholder":o.attr("placeholder",t);break;default:o.innerHTML=PopupEDK.getTranslation(t)}}},getTranslation:function(e,n){return chrome.i18n.getMessage(e)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvcHVwLmpzIl0sIm5hbWVzIjpbIlBvcHVwRURLIiwibWFpbiIsIkdlbmVyYWwiLCJwcm90b3R5cGUiLCJpbml0Iiwic3dpdGNoIiwib25Qb3B1cE9wZW4iLCJnb29nbGVTZWFyY2giLCJjbG9zZUFsZXJ0Iiwic2hvd05vRG9tYWluQWxlcnQiLCJ0cmFuc2xhdGlvbnMiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2hyb21lIiwidGFicyIsInF1ZXJ5IiwiYWN0aXZlIiwiY3VycmVudFdpbmRvdyIsInNlbmRSZXF1ZXN0IiwiaWQiLCJhY3Rpb24iLCJyZXNwIiwiZG9uZSIsInN3aXRjaEJ0biIsImNvbnNvbGUiLCJsb2ciLCJsb2dTdG9yYWdlIiwic3RvcmFnZSIsInN5bmMiLCJnZXQiLCJyZXN1bHQiLCJkayIsImJ1dHRvbiIsInNldCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ1bmRlZmluZWQiLCJ0aGlzIiwiYXR0ciIsIiRpbnB1dCIsImZpbmQiLCJ1cmwiLCJ2YWwiLCIkYWxsQWxlcnRzIiwiY2hyb21lU3RvcmFnZUFsZXJ0cyIsImFsZXJ0cyIsImVhY2giLCJpIiwidmFsdWUiLCJzZXRUaW1lb3V0IiwibGVuZ3RoIiwicHVzaCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidGhlbiIsImNhdGNoIiwiZXJyb3IiLCJ0b2dnbGVDbGFzcyIsInRyYW5zbGF0ZV9lbG10cyIsIml0ZW0iLCJrZXkiLCJnZXRBdHRyaWJ1dGUiLCJ0YXJnZXQiLCJpbm5lckhUTUwiLCJnZXRUcmFuc2xhdGlvbiIsInBhcmFtcyIsImkxOG4iLCJnZXRNZXNzYWdlIl0sIm1hcHBpbmdzIjoiQUFDQSxJQXNCQUEsU0F0QkFDLEtBQUFBLE1BQUEsR0FFQUEsS0FBQUMsUUFBQSxhQUdBRCxLQUFBQyxRQUFBQyxVQUFBLENBQ0FDLEtBQUEsV0FDQUosU0FBQUssU0FDQUwsU0FBQU0sY0FDQU4sU0FBQU8sZUFDQVAsU0FB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QUEsRUFBQUMsS0FDQStCLEVBQUEscUJBRUFDLEVBQUFqQyxHQUdBaUMsRUFBQSwwQkFNQUMsS0FDQSxTQUFBUCxHQUNBeEIsUUFBQUMsSUFBQXVCLEtBQ0FRLE1BQ0EsU0FBQUMsR0FDQWpDLFFBQUFDLElBQUFnQyxHQUNBbEQsRUFBQSx1Q0FBQW1ELFlBQUEsYUFJQXBELGFBQUEsV0FFQSxJQURBLElBQUFxRCxFQUFBcEQsRUFBQSxlQUNBd0MsRUFBQSxFQUFBQSxFQUFBWSxFQUFBVCxTQUFBSCxFQUFBLENBQ0EsSUFBQWEsRUFBQUQsRUFBQVosR0FFQWMsRUFBQUQsRUFBQUUsYUFBQSxhQUNBQyxFQUFBSCxFQUFBRSxhQUFBLG9CQUdBLE9BREF0QyxRQUFBQyxJQUFBc0MsR0FDQUEsR0FDQSxJQUFBLGNBQ0FILEVBQUF0QixLQUFBLGNBQUF1QixHQUNBLE1BQ0EsUUFDQUQsRUFBQUksVUFBQXBFLFNBQUFxRSxlQUFBSixNQUlBSSxlQUFBLFNBQUFKLEVBQUFLLEdBQ0EsT0FBQXJELE9BQUFzRCxLQUFBQyxXQUFBUCIsImZpbGUiOiJwb3B1cC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIERlY2xhcmUgbmFtZXNwYWNlXHJcbnZhciBtYWluID0gbWFpbiB8fCB7fTtcclxuXHJcbm1haW4uR2VuZXJhbCA9IGZ1bmN0aW9uICgpIHtcclxufTtcclxuXHJcbm1haW4uR2VuZXJhbC5wcm90b3R5cGUgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgUG9wdXBFREsuc3dpdGNoKCk7XHJcbiAgICAgICAgUG9wdXBFREsub25Qb3B1cE9wZW4oKTtcclxuICAgICAgICBQb3B1cEVESy5nb29nbGVTZWFyY2goKTtcclxuICAgICAgICBQb3B1cEVESy5jbG9zZUFsZXJ0KCk7XHJcbiAgICAgICAgUG9wdXBFREsuc2hvd05vRG9tYWluQWxlcnQoKTtcclxuICAgICAgICBQb3B1cEVESy50cmFuc2xhdGlvbnMoKTtcclxuICAgIH1cclxufTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBnID0gbmV3IG1haW4uR2VuZXJhbCgpO1xyXG4gICAgZy5pbml0KCk7XHJcbn0pO1xyXG5cclxuLy9TdGFydFxyXG52YXIgUG9wdXBFREs7XHJcblBvcHVwRURLID0ge1xyXG4gICAgc3dpdGNoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJy5zd2l0Y2gtb25vZmZfX3NsaWRlJyk7XHJcbiAgICAgICAgYnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZX0sIGZ1bmN0aW9uICh0YWJzKSB7XHJcbiAgICAgICAgICAgICAgICBjaHJvbWUudGFicy5zZW5kUmVxdWVzdCh0YWJzWzBdLmlkLCB7YWN0aW9uOiBcInN3aXRjaFwifSwgZnVuY3Rpb24gKHJlc3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcC5kb25lID09PSBcInN3aXRjaFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3B1cEVESy5zd2l0Y2hCdG4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGxvZ1N0b3JhZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ2RrJ10sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmRrKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzd2l0Y2hCdG46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYnV0dG9uID0gJCgnLnN3aXRjaC1vbm9mZl9fc2xpZGUnKTtcclxuICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ2RrJ10sIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5kayA9PT0gJ2Rpc2FibGVkJykge1xyXG4gICAgICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe2RrOiAnZW5hYmxlZCd9KTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe2RrOiAnZGlzYWJsZWQnfSk7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFBvcHVwRURLLmxvZ1N0b3JhZ2UoKTtcclxuICAgIH0sXHJcbiAgICBvblBvcHVwT3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBidXR0b24gPSAkKCcuc3dpdGNoLW9ub2ZmX19zbGlkZScpO1xyXG4gICAgICAgIGlmIChjaHJvbWUuc3RvcmFnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFsnZGsnXSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kayA9PT0gJ2Rpc2FibGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZGsgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe2RrOiAnZGlzYWJsZWQnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZ29vZ2xlU2VhcmNoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2dvb2dsZS1zZWFyY2gnKS5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gJCh0aGlzKS5hdHRyKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgJGlucHV0ID0gJCh0aGlzKS5maW5kKCcuc2VhcmNoX19pbnB1dCcpO1xyXG4gICAgICAgICAgICB2YXIgbmFtZSA9ICRpbnB1dC5hdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICRpbnB1dC52YWwoKTtcclxuICAgICAgICAgICAgdmFyIHVybCA9IGFjdGlvbiArICc/JyArIG5hbWUgKyAnPScgKyB2YWx1ZTtcclxuICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe3VybDogdXJsfSk7XHJcblxyXG4gICAgICAgICAgICBjaHJvbWUudGFicy5xdWVyeSh7YWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlfSwgZnVuY3Rpb24gKHRhYnMpIHtcclxuICAgICAgICAgICAgICAgIGNocm9tZS50YWJzLnNlbmRSZXF1ZXN0KHRhYnNbMF0uaWQsIHthY3Rpb246IFwicmVkaXJlY3RcIn0sIGZ1bmN0aW9uIChyZXNwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3AuZG9uZSA9PT0gXCJyZWRpcmVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVkaXJlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgY2xvc2VBbGVydDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciAkYWxsQWxlcnRzID0gJCgnLmFsZXJ0JyksXHJcbiAgICAgICAgICAgIGNocm9tZVN0b3JhZ2VBbGVydHMgPSBbXTtcclxuICAgICAgICBpZiAoY2hyb21lLnN0b3JhZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChbJ2FsZXJ0cyddLCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmFsZXJ0cyAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGNocm9tZVN0b3JhZ2VBbGVydHMgPSByZXN1bHQuYWxlcnRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNocm9tZVN0b3JhZ2VBbGVydHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChjaHJvbWVTdG9yYWdlQWxlcnRzLCBmdW5jdGlvbiAoaSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyB2YWx1ZSkuYWRkQ2xhc3MoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJGFsbEFsZXJ0cy5sZW5ndGggIT09IGNocm9tZVN0b3JhZ2VBbGVydHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcud2FybmluZ19fY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMjUwKTtcclxuXHJcbiAgICAgICAgJGFsbEFsZXJ0cy5vbignY2xvc2VkLmJzLmFsZXJ0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoY2hyb21lLnN0b3JhZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY2hyb21lU3RvcmFnZUFsZXJ0cy5wdXNoKHRoaXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoe2FsZXJ0czogY2hyb21lU3RvcmFnZUFsZXJ0c30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc2hvd05vRG9tYWluQWxlcnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIHRyeUNvbm5lY3Rpb24gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGNocm9tZS50YWJzLnF1ZXJ5KHthY3RpdmU6IHRydWUsIGN1cnJlbnRXaW5kb3c6IHRydWV9LCBmdW5jdGlvbiAodGFicykge1xyXG4gICAgICAgICAgICAgICAgY2hyb21lLnRhYnMuc2VuZFJlcXVlc3QodGFic1swXS5pZCwge2FjdGlvbjogXCJ0ZXN0Q29ubmVjdGlvblwifSwgZnVuY3Rpb24gKHJlc3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcC5kb25lID09PSBcIkNvbm5lY3Rpb25TdWNjZXNzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ0Nvbm5lY3Rpb25TdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoJ0Nvbm5lY3Rpb25GYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRyeUNvbm5lY3Rpb24udGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICQoJy5wb3B1cF9fZGlzYWJsZWQsIC5wb3B1cF9fY29udGFpbmVyJykudG9nZ2xlQ2xhc3MoJ2Qtbm9uZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcbiAgICB0cmFuc2xhdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0cmFuc2xhdGVfZWxtdHMgPSAkKFwiW2RhdGEtaTE4bl1cIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFuc2xhdGVfZWxtdHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0cmFuc2xhdGVfZWxtdHNbaV07XHJcblxyXG4gICAgICAgICAgICB2YXIga2V5ID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaTE4bicpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaTE4bi10YXJnZXQnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhcmdldCk7XHJcbiAgICAgICAgICAgIHN3aXRjaCh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3BsYWNlaG9sZGVyJzpcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmF0dHIoJ3BsYWNlaG9sZGVyJywga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBQb3B1cEVESy5nZXRUcmFuc2xhdGlvbihrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGdldFRyYW5zbGF0aW9uOiBmdW5jdGlvbihrZXksIHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKGtleSk7XHJcbiAgICB9XHJcbn07Il19
