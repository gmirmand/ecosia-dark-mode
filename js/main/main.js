// Declare namespace
var main = main || {};

main.General = function () {
};

main.General.prototype = {
    init: function () {
        GlobalEDK.init();
    }
};

$(document).ready(function () {
    var g = new main.General();
    g.init();
});

//Start
var GlobalEDK;
GlobalEDK = {
    //Init
    init: function () {
        GlobalEDK.EDK_class();
        GlobalEDK.EDK_image();
        GlobalEDK.PopupListener();
    },
    EDK_class: function () {
        $('body').addClass('EDK__body');
    },
    EDK_image: function () {
        //Logo on main page
        $('.logos-container a').append(
            '<img src="https://i.ibb.co/hdLbcZC/logo-ecosia-dark-full.png" alt="Ecosia" border="0">'
        );

        //this permit to add a filter to svg image that are place in background without applying the filter on the child content
        $('.info-section').each(function(){
            $(this).append('<div class="bg-filter"></div>')
        });

        //50M logo on search page
        $('.logo-anchor svg').addClass('offDK');
        $('.logo-anchor').append('<?xml version="1.0" encoding="utf-8"?>\n' +
            '<!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n' +
            '<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" class="onDK" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n' +
            '\t viewBox="0 0 149 131" style="enable-background:new 0 0 149 131;" xml:space="preserve">\n' +
            '<style type="text/css">\n' +
            '\t.st0{fill:#16877F;}\n' +
            '\t.st1{fill:#FFFFFF;}\n' +
            '\t.st2{fill:#131A2F;}\n' +
            '</style>\n' +
            '<g>\n' +
            '\t<path class="st0" d="M75,15h31.2H13v72h0c0.3,14.4,12.2,26,26.8,26c0.1,0,0.1,0,0.2,0l93,0V41.7c0-14.7-12-26.7-26.8-26.7H75z"/>\n' +
            '\t<g>\n' +
            '\t\t<path class="st1" d="M73.9,91.2V94c0,2.1,0.9,2.9,2.4,2.9s2.4-0.8,2.4-2.9v-6.5c0-2.1-0.9-2.9-2.4-2.9c-1.5,0-2.4,0.8-2.4,2.9v0.9\n' +
            '\t\t\th-4.4l0.8-17.1h12.2v4.2h-8.1l-0.4,7h0.1c0.8-1.4,2.1-2.1,4-2.1c3.4,0,5.1,2.4,5.1,6.7v6.6c0,4.7-2.4,7.4-6.9,7.4\n' +
            '\t\t\tc-4.5,0-6.9-2.7-6.9-7.4v-2.4L73.9,91.2L73.9,91.2z M90.7,94c0,2.1,0.9,2.9,2.4,2.9s2.4-0.8,2.4-2.9V78.1c0-2.1-0.9-2.9-2.4-2.9\n' +
            '\t\t\tc-1.5,0-2.4,0.8-2.4,2.9V94z M86,78.4c0-4.7,2.5-7.4,7-7.4c4.5,0,7,2.7,7,7.4v15.3c0,4.7-2.5,7.4-7,7.4c-4.5,0-7-2.7-7-7.4V78.4z\n' +
            '\t\t\t M112.8,92.2L112.8,92.2l3.2-20.9h6.4v29.4H118V79.6H118l-3.1,21.1h-4.4l-3.4-20.8H107v20.8h-4V71.3h6.4L112.8,92.2z"/>\n' +
            '\t</g>\n' +
            '\t<g>\n' +
            '\t\t<path class="st1" d="M27.6,39h6.3v4.2h-6.3v8.6h8V56H22.9V26.6h12.6v4.2h-8L27.6,39z M52,45V49c0,4.7-2.4,7.4-6.9,7.4\n' +
            '\t\t\ts-6.9-2.7-6.9-7.4V33.7c0-4.7,2.4-7.4,6.9-7.4S52,29,52,33.7v2.9h-4.4v-3.2c0-2.1-0.9-2.9-2.4-2.9c-1.5,0-2.4,0.8-2.4,2.9v15.9\n' +
            '\t\t\tc0,2.1,0.9,2.9,2.4,2.9c1.5,0,2.4-0.8,2.4-2.9V45C47.6,45,52,45,52,45z M59.5,49.2c0,2.1,0.9,2.9,2.4,2.9s2.4-0.8,2.4-2.9V33.4\n' +
            '\t\t\tc0-2.1-0.9-2.9-2.4-2.9s-2.4,0.8-2.4,2.9V49.2z M54.9,33.7c0-4.7,2.5-7.4,7-7.4c4.5,0,7,2.7,7,7.4V49c0,4.7-2.5,7.4-7,7.4\n' +
            '\t\t\tc-4.5,0-7-2.7-7-7.4C54.9,49,54.9,33.7,54.9,33.7z M78.5,26.3c4.5,0,6.8,2.7,6.8,7.4v0.9h-4.4v-1.2c0-2.1-0.8-2.9-2.3-2.9\n' +
            '\t\t\ts-2.3,0.8-2.3,2.9c0,2.1,0.9,3.7,3.9,6.4c3.9,3.4,5.1,5.8,5.1,9.2c0,4.7-2.4,7.4-6.9,7.4s-6.9-2.7-6.9-7.4v-1.8h4.4v2.1\n' +
            '\t\t\tc0,2.1,0.9,2.9,2.4,2.9c1.5,0,2.4-0.8,2.4-2.9c0-2.1-0.9-3.7-3.9-6.4c-3.9-3.4-5.1-5.8-5.1-9.2C71.7,29,74,26.3,78.5,26.3\n' +
            '\t\t\t M88.2,56h4.6V26.6h-4.6V56z M100.6,46.7h4.5l-2.2-14.9h-0.1C102.8,31.8,100.6,46.7,100.6,46.7z M111.1,56h-4.7l-0.8-5.3H100\n' +
            '\t\t\tL99.2,56H95l4.7-29.4h6.8L111.1,56L111.1,56z"/>\n' +
            '\t</g>\n' +
            '\t<g>\n' +
            '\t\t<path class="st2" d="M21.6,120c-1.8,3.1-1,5.8-1,5.8s2.1,0.6,4.8-2.9c2.7-3.5,1.6-6.9,1.6-6.9S23.5,116.9,21.6,120 M13.3,112.2\n' +
            '\t\t\tc-1.8,1.8-1.7,3.8-1.7,3.8s1.4,0.8,3.8-1.2c2.4-2,2.3-4.5,2.3-4.5S15.2,110.3,13.3,112.2 M37.5,119.1c0,0-2.1,1.6-2.4,5.1\n' +
            '\t\t\tc-0.3,3.5,2.1,6,2.1,6s2.7-2.1,2.5-6.2C39.5,119.7,37.5,119.1,37.5,119.1 M50.1,118.7c0,0-0.6,1.9,0.7,4.1\n' +
            '\t\t\tc1.3,2.2,3.8,2.8,3.8,2.8s0.8-2.4-1.1-4.9C51.6,118.2,50.1,118.7,50.1,118.7 M4.4,84.4c-2.1-0.2-3.3,1-3.3,1s0.2,1.2,2.7,1.8\n' +
            '\t\t\tc2.5,0.5,4-0.9,4-0.9S6.5,84.5,4.4,84.4 M10.5,99.1c0,0-2.2-1.4-5.6-0.5s-4.9,4-4.9,4s2.9,1.8,6.7,0.2\n' +
            '\t\t\tC10.6,101.2,10.5,99.1,10.5,99.1"/>\n' +
            '\t</g>\n' +
            '\t<g>\n' +
            '\t\t<path class="st2" d="M130.9,13.2c2.5-2.7,2.2-5.4,2.2-5.4s-1.9-1-5.3,1.8s-3,6.4-3,6.4S128.5,15.9,130.9,13.2 M137.4,22.6\n' +
            '\t\t\tc2.1-1.4,2.5-3.4,2.5-3.4s-1.2-1-4,0.4c-2.8,1.4-3.2,3.9-3.2,3.9S135.1,24.1,137.4,22.6 M115.2,10.8c0,0,2.4-1.1,3.4-4.5\n' +
            '\t\t\tS117.9,0,117.9,0s-3.1,1.4-3.8,5.6C113.4,9.7,115.2,10.8,115.2,10.8 M102.8,8.5c0,0,1-1.7,0.2-4.2c-0.8-2.4-3.2-3.6-3.2-3.6\n' +
            '\t\t\ts-1.3,2.2,0.1,5C101.3,8.6,102.8,8.5,102.8,8.5 M140.2,51.8c2,0.6,3.4-0.2,3.4-0.2s0-1.3-2.3-2.3c-2.3-1-4.1,0.1-4.1,0.1\n' +
            '\t\t\tS138.1,51.1,140.2,51.8 M137.3,36c0,0,1.9,1.9,5.4,1.7c3.5-0.2,5.7-2.8,5.7-2.8s-2.4-2.4-6.5-1.7C137.7,34,137.3,36,137.3,36"/>\n' +
            '\t</g>\n' +
            '\t<path class="st1" d="M40.8,62.5c-12,0-21.8,9.8-21.8,21.8c0,12,9.8,21.8,21.8,21.8c12,0,21.8-9.8,21.8-21.8\n' +
            '\t\tC62.7,72.3,52.9,62.5,40.8,62.5"/>\n' +
            '\t<path class="st2" d="M40.8,66c-10.3,0-18.6,8.4-18.6,18.5c0,10.3,8.3,18.6,18.6,18.6c10.2,0,18.5-8.3,18.5-18.6S51,66,40.8,66"/>\n' +
            '\t<path class="st0" d="M58.8,88.2c0,0.1,0,0.3,0.1,0.4c0.1-0.2,0.1-0.4,0.1-0.7C58.9,88,58.9,88.1,58.8,88.2 M46.1,91.6\n' +
            '\t\tc-0.6,0.4-1,0.8-1.2,1.8c0.1,0.2,0.2,0.3,0.5,0.5c0.8-0.3,1.6-1.5,1-2.3C46.3,91.6,46.2,91.6,46.1,91.6 M37.2,68.1\n' +
            '\t\tc-0.3-0.1-0.8-0.2-1.1-0.3c-0.9,0.2-2,0-3-0.2c-0.8,0.3-1.5,0.8-2.2,1.2c0.1,0.1,0.3,0.3,0.3,0.5c-0.1,0.5-0.6,1-0.4,1.5\n' +
            '\t\tc0.1,0.3,0.2,0.5,0.5,0.7c0.9,0.1,1.4-0.5,2-0.7c0.7-0.1,1.4-0.2,2.1-0.3C36.3,70.2,37.8,69,37.2,68.1 M26.4,85.1\n' +
            '\t\tc-0.3-0.5-0.7-1-1-1.5c-0.9-0.9-1.8-1.6-2.9-1.9c-0.1,0.9-0.2,1.8-0.2,2.8c0,3.1,0.8,6.1,2.2,8.7c0.2-0.2,0.4-0.3,0.6-0.5\n' +
            '\t\tc0.3-0.5,0.6-1,0.9-1.4c0.5-0.5,1.2-0.6,1.6-1.2c0.1-0.4,0.3-0.9,0.5-1.3c0.3-0.5,1-1,0.8-1.7C28.5,86,27.1,85.9,26.4,85.1\n' +
            '\t\t M26.8,73.7c0.6-0.3,1,0.5,1.4-0.1C28.8,73,28,72,28,71.3c0-0.1,0.1-0.3,0.1-0.5c-1.2,1.1-2.3,2.4-3.1,3.8c0.3-0.1,0.5-0.1,0.8-0.1\n' +
            '\t\tC26.2,74.2,26.4,74,26.8,73.7"/>\n' +
            '\t<path class="st0" d="M44,80.2c-0.4,0.1-0.8-0.2-1.1-0.3c-0.5-0.1-1-0.1-1.5-0.1c-0.1,0-2.5-1.9-2.5-2c0.1-0.3,0.3-0.3,0.5-0.5\n' +
            '\t\tc0.9,0.2,1.1,0.8,1.7,1c0.3,0.1,0.6,0.1,1,0.2c0.3,0.3,0.7,0.5,1,0.8c0.4,0.2,1,0.2,1.3,0.3c0,0.1,0.1,0.1,0.1,0.2V80\n' +
            '\t\tC44.2,80,44.1,80.1,44,80.2 M54.1,71.6c-0.4,0-0.8,0-1.2,0.1c-1.8,0.3-3.7,0.5-5.8,0.6c-1.8,0-2.8-1.5-4.6-1.1\n' +
            '\t\tc-0.7,0.1-2,0.9-2.3,1.4c-0.5,0.8,0.1,1.2-0.8,1.6c-0.6-0.1-0.8-0.6-1.4-0.9c-0.5,0.1-0.7,0.2-1,0.5c-0.1,0.8,0.5,1,0.5,1.8\n' +
            '\t\tc-0.3,0.5-1.2,0.5-1.4,1.1c-0.3,0.6,0,1.3-0.4,1.8c-0.6,0.5-1.2,1.2-1.8,1.7c-1.2,1.4-0.6,3.8,0.3,4.6c0.8,0.8,2,0.1,3.1,0.6\n' +
            '\t\tc0.8,0.3,1,1.9,1.2,2.7c0.4,1.2-0.3,1.8-0.3,2.9c0,1.2,0.4,4.5,2,4.4c1.8-0.1,2.3-1.9,3.3-3.1c0.3-0.4,0.9-0.6,1.2-1.2\n' +
            '\t\tc0-0.6,0.1-1.3,0.1-1.9c0.4-1.1,1.7-1.4,2.4-2.3c0.7-0.8,0.1-1.4,0.4-2c0,0,0.1,0,0.1-0.1c0.5-0.3,1.1-0.6,1.7-1\n' +
            '\t\tc0.3-0.3,0.5-0.7,0.8-1c0.2-0.1,0.4-0.1,0.6-0.2c2.1,1.1,1.4,3.3,2.9,4.4c0.1-0.1,0.2-0.1,0.3-0.2c0.2-0.3,0.1-0.5,0.2-1\n' +
            '\t\tc0.3-0.8,1.2-1.6,2.3-1.4c0.5,0.6,1.3,1.4,1.4,2.3c0.1,0.8-0.4,1.3-0.4,2c0,0.5,0.3,1.1,0.7,1.7c0.3-0.7,0.5-1.4,0.6-2.2\n' +
            '\t\tc0-0.1,0-0.3-0.1-0.4c0.1-0.1,0.1-0.1,0.1-0.3c0.2-1.1,0.3-2.3,0.3-3.4C59.3,79.5,57.3,75,54.1,71.6"/>\n' +
            '</g>\n' +
            '</svg>\n')
    },
    PopupListener: function () {
        chrome.extension.onRequest.addListener(
            function (request, sender, sendResponse) {
                if (request.action === "switch") {
                    $('body').toggleClass('EDK__body');
                    sendResponse({done: 'switch'});
                } else {
                    sendResponse({done: 'no action'});
                }
            });
    }
};